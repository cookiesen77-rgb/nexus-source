# Tauri Setup Notes

## What Was Added
- `src-tauri/` scaffold generated by Tauri CLI (Rust core, config, icons).
- Vite + router now support a `tauri` mode for relative base paths and hash routing.
- Tauri scripts wired into `package.json`.
- Native image cache command for bypassing CORS/CORP image blocks.

## Scripts
- Tauri dev: `npm run dev:tauri`
- Tauri build: `npm run build:tauri`

## 发布给 Mac / Windows 用户（网盘 + GitHub）
### 产物在哪里
- 本地打包产物一般在：`src-tauri/target/release/bundle/`
  - macOS 常见：`.dmg`（以及 `.app`）
  - Windows 常见：`.msi` / `.exe`

### GitHub 自动打包（推荐）
已添加两条 GitHub Actions（在 `nexus/.github/workflows/`）：
- `Tauri Build (Artifacts)`：手动触发，分别为 macOS（Intel/Apple Silicon）+ Windows 构建，并把安装包作为 Actions Artifacts 上传。
- `Tauri Release (GitHub Releases)`：当你 push 一个 tag（如 `v0.1.0`）时自动构建，并把安装包上传到对应的 GitHub Release。

建议发布流程：
1. 把版本号同步到：
   - `nexus/package.json`
   - `src-tauri/tauri.conf.json`
   - `src-tauri/Cargo.toml`
2. 打 tag 并推送：`git tag v0.1.0 && git push origin v0.1.0`
3. 等 GitHub Actions 跑完，在 Releases 页面下载/转存到网盘即可。

### 签名提示（影响“别人安装体验”）
- macOS：不签名/不公证也能分发，但用户可能会遇到 Gatekeeper 拦截，需要手动在“隐私与安全性”里允许打开；想要“无感安装”通常需要签名 + 公证。
- Windows：无签名可能触发 SmartScreen 警告；有代码签名证书体验更顺。

## Configuration Highlights
- `src-tauri/tauri.conf.json` sets the window size to 1280×800 (min 1024×640).
- Bundle identifier: `com.nexus.app`.
- Vite commands are run with `--mode tauri`.
- Asset protocol enabled with `$APPCACHE/**` scope for cached images.

## Notes
- Tauri builds require Rust toolchain and platform SDKs (Xcode on macOS, MSVC on Windows).
- The web build remains unchanged for non-Tauri deployments.
